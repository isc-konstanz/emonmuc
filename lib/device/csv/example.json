{
    "name": "Home",
    "category": "Demonstration",
    "group": "CSV",
    "description": "Configuration for a CSV driver demonstration, creating the device channels, inputs and feeds for a virtual household.",

    "driver": "csv",
    "devices": [
        {
            "description": "Household energy consumption",
            "settings": "samplingmode=hhmmss;rewind=true"
        }
    ],

    "scan": {
        "settings": "path=lib/driver/csv/"
    },

    "options": [
        {
            "id": "file",
            "name": "CSV file",
            "description": "The location of the provided demonstration CSV file.<br><b>Default:</b><ul><li>lib/driver/csv/home1.csv</li><li>lib/driver/csv/home2.csv</li></ul>",
            "type": "text",
            "scan": true,
            "mandatory": true,
            "syntax": "deviceAddress"
        }
    ],

    "channels": [
        {
            "name": "<node>*pv",
            "description": "Photovoltaic generation power",
            "address": "pv_power_production",
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 60000},
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit": "kW"},
            "processList": [
                {
                    "process": "scale",
                    "arguments": {"type": "ProcessArg::VALUE", "value": "1000"}
                },
                {
                    "process": "log_to_feed",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "<node>*solar", "tag": "Power"}
                },
                {
                    "process": "power_to_kwh",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "<node>*solar", "tag": "Energy"}
                }
            ]
        },
        {
            "name": "<node>*grid",
            "description": "Grid power",
            "address": "grid_power",
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 60000},
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit": "kW"},
            "processList": [
                {
                    "process": "scale",
                    "arguments": {"type": "ProcessArg::VALUE", "value": "1000"}
                },
                {
                    "process": "allowpositive",
                    "arguments": {"type": "ProcessArg::NONE"}
                },
                {
                    "process": "log_to_feed",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "<node>*grid*import", "tag": "Power"}
                },
                {
                    "process": "power_to_kwh",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "<node>*grid*import", "tag": "Energy"}
                },
                {
                    "process": "reset2original",
                    "arguments": {"type": "ProcessArg::NONE"}
                },
                {
                    "process": "scale",
                    "arguments": {"type": "ProcessArg::VALUE", "value": "-1000"}
                },
                {
                    "process": "allowpositive",
                    "arguments": {"type": "ProcessArg::NONE"}
                },
                {
                    "process": "log_to_feed",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "<node>*grid*export", "tag": "Power"}
                },
                {
                    "process": "power_to_kwh",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "<node>*grid*export", "tag": "Energy"}
                }
            ]
        },
        {
            "name": "<node>*consumption",
            "description": "Consumption power",
            "address": "grid_power",
            "logging": {"loggingInterval": 5000, "loggingTimeOffset": 1000, "loggingMaxInterval": 60000},
            "configs": {"samplingInterval": 5000, "samplingTimeOffset": 1000, "valueType":"DOUBLE", "unit": "kW"},
            "processList": [
                {
                    "process": "scale",
                    "arguments": {"type": "ProcessArg::VALUE", "value": "1000"}
                },
                {
                    "process": "add_feed",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "<node>*solar", "tag": "Power"}
                },
                {
                    "process": "allowpositive",
                    "arguments": {"type": "ProcessArg::NONE"}
                },
                {
                    "process": "log_to_feed",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "<node>*consumption", "tag": "Power"}
                },
                {
                    "process": "power_to_kwh",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "<node>*consumption", "tag": "Energy"}
                }
            ]
        },
        {
            "name": "<node>*hp",
            "description": "Heat pump consumption",
            "address": "hp_power_consumption",
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 60000},
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit": "kW"},
            "processList": [
                {
                    "process": "scale",
                    "arguments": {"type": "ProcessArg::VALUE", "value": "1000"}
                },
                {
                    "process": "log_to_feed",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "<node>*heatpump", "tag": "Power"}
                },
                {
                    "process": "power_to_kwh",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "<node>*heatpump", "tag": "Energy"}
                }
            ]
        },
        {
            "name": "<node>*ev",
            "description": "Electric vehicle consumption",
            "address": "ev_power_consumption",
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 60000},
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit": "kW"},
            "processList": [
                {
                    "process": "scale",
                    "arguments": {"type": "ProcessArg::VALUE", "value": "1000"}
                },
                {
                    "process": "log_to_feed",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "<node>*ev", "tag": "Power"}
                },
                {
                    "process": "power_to_kwh",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "<node>*ev", "tag": "Energy"}
                }
            ]
        }
    ],

    "feeds": [
        {
            "name": "<node>*solar",
            "tag": "Power",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "W"
        },
        {
            "name": "<node>*solar",
            "tag": "Energy",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "kWh"
        },
        {
            "name": "<node>*grid*import",
            "tag": "Power",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "W"
        },
        {
            "name": "<node>*grid*import",
            "tag": "Energy",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "kWh"
        },
        {
            "name": "<node>*grid*export",
            "tag": "Power",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "W"
        },
        {
            "name": "<node>*grid*export",
            "tag": "Energy",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "kWh"
        },
        {
            "name": "<node>*consumption",
            "tag": "Power",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "W"
        },
        {
            "name": "<node>*consumption",
            "tag": "Energy",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "kWh"
        },
        {
            "name": "<node>*heatpump",
            "tag": "Power",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "W"
        },
        {
            "name": "<node>*heatpump",
            "tag": "Energy",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "kWh"
        },
        {
            "name": "<node>*ev",
            "tag": "Power",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "W"
        },
        {
            "name": "<node>*ev",
            "tag": "Energy",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "kWh"
        }
    ],
    
    "syntax": {
        "deviceAddress": {
            "keyValue": false
        }
    }
}