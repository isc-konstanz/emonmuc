{
    "name": "CSV",
    "category": "General",
    "group": "Example",
    "description": "Requires the <b>CSV</b> driver to be installed.<br><br>Configuration for an emonmuc demonstration, creating the device channels, inputs and feeds for a virtual household.",

    "driver": "csv",
    "devices": [
        {
            "description": "Household energy consumption",
            "settings": "samplingmode=hhmmss;rewind=true"
        }
    ],

    "scan": {
        "settings": "path=lib/driver/csv/"
    },

    "options": [
        {
            "id": "file",
            "name": "CSV file",
            "description": "The location of the provided demonstration CSV file.<br><b>Default:</b><ul><li>lib/driver/csv/home1.csv</li><li>lib/driver/csv/home2.csv</li></ul>",
            "type": "text",
            "scan": true,
            "mandatory": true,
            "syntax": "deviceAddress"
        }
    ],

    "channels": [
        {
            "name": "<node>*pv",
            "description": "Photovoltaic generation power",
            "address": "pv_power_production",
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 60000},
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit": "kW"},
            "processList": [
                {
                    "process": "scale",
                    "arguments": {"type": "ProcessArg::VALUE", "value": "1000"}
                },
                {
                    "process": "log_to_feed",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "Solar power", "tag": "<name>"}
                },
                {
                    "process": "power_to_kwh",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "Solar energy", "tag": "<name>"}
                }
            ]
        },
        {
            "name": "<node>*grid",
            "description": "Grid power",
            "address": "grid_power",
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 60000},
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit": "kW"},
            "processList": [
                {
                    "process": "scale",
                    "arguments": {"type": "ProcessArg::VALUE", "value": "1000"}
                },
                {
                    "process": "allowpositive",
                    "arguments": {"type": "ProcessArg::NONE"}
                },
                {
                    "process": "log_to_feed",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "Import power", "tag": "<name>"}
                },
                {
                    "process": "power_to_kwh",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "Import energy", "tag": "<name>"}
                },
                {
                    "process": "reset2original",
                    "arguments": {"type": "ProcessArg::NONE"}
                },
                {
                    "process": "scale",
                    "arguments": {"type": "ProcessArg::VALUE", "value": "-1000"}
                },
                {
                    "process": "allowpositive",
                    "arguments": {"type": "ProcessArg::NONE"}
                },
                {
                    "process": "log_to_feed",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "Export power", "tag": "<name>"}
                },
                {
                    "process": "power_to_kwh",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "Export energy", "tag": "<name>"}
                }
            ]
        },
        {
            "name": "<node>*consumption",
            "description": "Consumption power",
            "address": "grid_power",
            "logging": {"loggingInterval": 5000, "loggingTimeOffset": 1000, "loggingMaxInterval": 60000},
            "configs": {"samplingInterval": 5000, "samplingTimeOffset": 1000, "valueType":"DOUBLE", "unit": "kW"},
            "processList": [
                {
                    "process": "scale",
                    "arguments": {"type": "ProcessArg::VALUE", "value": "1000"}
                },
                {
                    "process": "add_feed",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "Solar power", "tag": "<name>"}
                },
                {
                    "process": "allowpositive",
                    "arguments": {"type": "ProcessArg::NONE"}
                },
                {
                    "process": "log_to_feed",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "Consumption power", "tag": "<name>"}
                },
                {
                    "process": "power_to_kwh",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "Consumption energy", "tag": "<name>"}
                }
            ]
        },
        {
            "name": "<node>*hp",
            "description": "Heat pump consumption",
            "address": "hp_power_consumption",
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 60000},
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit": "kW"},
            "processList": [
                {
                    "process": "scale",
                    "arguments": {"type": "ProcessArg::VALUE", "value": "1000"}
                },
                {
                    "process": "log_to_feed",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "Heat pump power", "tag": "<name>"}
                },
                {
                    "process": "power_to_kwh",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "Heat pump energy", "tag": "<name>"}
                }
            ]
        },
        {
            "name": "<node>*ev",
            "description": "Electric vehicle consumption",
            "address": "ev_power_consumption",
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 60000},
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit": "kW"},
            "processList": [
                {
                    "process": "scale",
                    "arguments": {"type": "ProcessArg::VALUE", "value": "1000"}
                },
                {
                    "process": "log_to_feed",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "EV power", "tag": "<name>"}
                },
                {
                    "process": "power_to_kwh",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "EV energy", "tag": "<name>"}
                }
            ]
        }
    ],

    "feeds": [
        {
            "name": "Solar power",
            "tag": "<name>",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "W"
        },
        {
            "name": "Solar energy",
            "tag": "<name>",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "kWh"
        },
        {
            "name": "Import power",
            "tag": "<name>",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "W"
        },
        {
            "name": "Import energy",
            "tag": "<name>",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "kWh"
        },
        {
            "name": "Export power",
            "tag": "<name>",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "W"
        },
        {
            "name": "Export energy",
            "tag": "<name>",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "kWh"
        },
        {
            "name": "Consumption power",
            "tag": "<name>",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "W"
        },
        {
            "name": "Consumption energy",
            "tag": "<name>",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "kWh"
        },
        {
            "name": "Heat pump power",
            "tag": "<name>",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "W"
        },
        {
            "name": "Heat pump energy",
            "tag": "<name>",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "kWh"
        },
        {
            "name": "EV power",
            "tag": "<name>",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "W"
        },
        {
            "name": "EV energy",
            "tag": "<name>",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "kWh"
        }
    ],

    "syntax": {
        "deviceAddress": {
            "keyValue": false
        }
    }
}