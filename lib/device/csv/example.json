{
    "name": "Home",
    "category": "Demonstration",
    "group": "CSV",
    "description": "Configuration for a CSV driver demonstration, creating the device channels, inputs and feeds for a virtual household.",
    
    "driver": "csv",
    "devices": [
        {
            "description": "Household energy consumption",
            "settings": "samplingmode=hhmmss;rewind=true"
        }
    ],
    
    "scan": {
        "settings": "path=lib/driver/csv/"
    },
    
    "options": [
        {
            "id": "file",
            "name": "CSV file",
            "description": "The location of the provided demonstration CSV file.<br><b>Default:</b><ul><li>lib/driver/csv/home1.csv</li><li>lib/driver/csv/home2.csv</li></ul>",
            "type": "text",
            "scan": true,
            "mandatory": true,
            "syntax": "deviceAddress"
        }
    ],
    
    "channels": [
        {
            "name": "pv_power",
            "description": "Photovoltaic generation power",
            "address": "pv_power_production",
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 60000},
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit": "kW"},
            "processList": [
                {
                    "process": "scale",
                    "arguments": {"type": "ProcessArg::VALUE", "value": "1000"}
                },
                {
                    "process": "log_to_feed",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "solar_power"}
                },
                {
                    "process": "power_to_kwh",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "solar_energy"}
                }
            ]
        },
        {
            "name": "grid_import_power",
            "description": "Grid import power",
            "address": "grid_power",
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 60000},
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit": "kW"},
            "processList": [
                {
                    "process": "scale",
                    "arguments": {"type": "ProcessArg::VALUE", "value": "1000"}
                },
                {
                    "process": "allowpositive",
                    "arguments": {"type": "ProcessArg::NONE"}
                },
                {
                    "process": "log_to_feed",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "grid_import_power"}
                },
                {
                    "process": "power_to_kwh",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "grid_import_energy"}
                }
            ]
        },
        {
            "name": "grid_export_power",
            "description": "Grid export power",
            "address": "grid_power",
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 60000},
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit": "kW"},
            "processList": [
                {
                    "process": "scale",
                    "arguments": {"type": "ProcessArg::VALUE", "value": "-1000"}
                },
                {
                    "process": "allowpositive",
                    "arguments": {"type": "ProcessArg::NONE"}
                },
                {
                    "process": "log_to_feed",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "grid_export_power"}
                },
                {
                    "process": "power_to_kwh",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "grid_export_energy"}
                }
            ]
        },
        {
            "name": "consumption_power",
            "description": "Consumption power",
            "address": "grid_power",
            "logging": {"loggingInterval": 5000, "loggingTimeOffset": 1000, "loggingMaxInterval": 60000},
            "configs": {"samplingInterval": 5000, "samplingTimeOffset": 1000, "valueType":"DOUBLE", "unit": "kW"},
            "processList": [
                {
                    "process": "scale",
                    "arguments": {"type": "ProcessArg::VALUE", "value": "1000"}
                },
                {
                    "process": "add_feed",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "solar_power"}
                },
                {
                    "process": "allowpositive",
                    "arguments": {"type": "ProcessArg::NONE"}
                },
                {
                    "process": "log_to_feed",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "consumption_power"}
                },
                {
                    "process": "power_to_kwh",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "consumption_energy"}
                }
            ]
        },
        {
            "name": "hp_power",
            "description": "Heat pump consumption",
            "address": "hp_power_consumption",
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 60000},
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit": "kW"},
            "processList": [
                {
                    "process": "scale",
                    "arguments": {"type": "ProcessArg::VALUE", "value": "1000"}
                },
                {
                    "process": "log_to_feed",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "heatpump_power"}
                },
                {
                    "process": "power_to_kwh",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "heatpump_energy"}
                }
            ]
        },
        {
            "name": "ev_power",
            "description": "Electric vehicle consumption",
            "address": "ev_power_consumption",
            "logging": {"loggingInterval": 5000, "loggingMaxInterval": 60000},
            "configs": {"samplingInterval": 5000, "valueType":"DOUBLE", "unit": "kW"},
            "processList": [
                {
                    "process": "scale",
                    "arguments": {"type": "ProcessArg::VALUE", "value": "1000"}
                },
                {
                    "process": "log_to_feed",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "ev_power"}
                },
                {
                    "process": "power_to_kwh",
                    "arguments": {"type": "ProcessArg::FEEDID", "value": "ev_energy"}
                }
            ]
        }
    ],

    "feeds": [
        {
            "name": "solar_power",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "W"
        },
        {
            "name": "solar_energy",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "kWh"
        },
        {
            "name": "grid_import_power",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "W"
        },
        {
            "name": "grid_import_energy",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "kWh"
        },
        {
            "name": "grid_export_power",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "W"
        },
        {
            "name": "grid_export_energy",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "kWh"
        },
        {
            "name": "consumption_power",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "W"
        },
        {
            "name": "consumption_energy",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "kWh"
        },
        {
            "name": "heatpump_power",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "W"
        },
        {
            "name": "heatpump_energy",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "kWh"
        },
        {
            "name": "ev_power",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "W"
        },
        {
            "name": "ev_energy",
            "type": "DataType::REALTIME",
            "engine": "Engine::PHPFINA",
            "interval": "60",
			"unit": "kWh"
        }
    ],
    
    "prefix": "name",
    "syntax": {
        "deviceAddress": {
            "keyValue": false
        }
    }
}